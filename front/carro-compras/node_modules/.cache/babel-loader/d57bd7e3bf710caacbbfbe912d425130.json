{"ast":null,"code":"import { ADD_TO_CART, REMOVE_ITEM, SUB_QUANTITY, ADD_QUANTITY } from '../actions/action-types/cart-actions'; // const shoppingInitialState = {\n//   // Colocar los productos del backend\n//   products: [],\n//   addedItems: [],\n//   total = 0\n// };\n\nexport default function CartReducer() {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : products;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  //INSIDE HOME COMPONENT\n  if (action.type === ADD_TO_CART) {\n    let addedItem = state.items.find(item => item.id === action.id); //check if the action id exists in the addedItems\n\n    let existed_item = state.addedItems.find(item => action.id === item.id);\n\n    if (existed_item) {\n      addedItem.quantity += 1;\n      return { ...state,\n        total: state.total + addedItem.price\n      };\n    } else {\n      addedItem.quantity = 1; //calculating the total\n\n      let newTotal = state.total + addedItem.price;\n      return { ...state,\n        addedItems: [...state.addedItems, addedItem],\n        total: newTotal\n      };\n    }\n  }\n\n  if (action.type === REMOVE_ITEM) {\n    let itemToRemove = state.addedItems.find(item => action.id === item.id);\n    let new_items = state.addedItems.filter(item => action.id !== item.id); //calculating the total\n\n    let newTotal = state.total - itemToRemove.price * itemToRemove.quantity;\n    console.log(itemToRemove);\n    return { ...state,\n      addedItems: new_items,\n      total: newTotal\n    };\n  } //INSIDE CART COMPONENT\n\n\n  if (action.type === ADD_QUANTITY) {\n    let addedItem = state.items.find(item => item.id === action.id);\n    addedItem.quantity += 1;\n    let newTotal = state.total + addedItem.price;\n    return { ...state,\n      total: newTotal\n    };\n  }\n\n  if (action.type === SUB_QUANTITY) {\n    let addedItem = state.items.find(item => item.id === action.id); //if the qt == 0 then it should be removed\n\n    if (addedItem.quantity === 1) {\n      let new_items = state.addedItems.filter(item => item.id !== action.id);\n      let newTotal = state.total - addedItem.price;\n      return { ...state,\n        addedItems: new_items,\n        total: newTotal\n      };\n    } else {\n      addedItem.quantity -= 1;\n      let newTotal = state.total - addedItem.price;\n      return { ...state,\n        total: newTotal\n      };\n    }\n  } else {\n    return state;\n  }\n}\n_c = CartReducer;\n\nvar _c;\n\n$RefreshReg$(_c, \"CartReducer\");","map":{"version":3,"sources":["/home/jhernandez/Documentos/Universidad/programacion-II/nuevocarro/carroCompras/front/carro-compras/src/reducers/cartReducer.js"],"names":["ADD_TO_CART","REMOVE_ITEM","SUB_QUANTITY","ADD_QUANTITY","CartReducer","state","products","action","type","addedItem","items","find","item","id","existed_item","addedItems","quantity","total","price","newTotal","itemToRemove","new_items","filter","console","log"],"mappings":"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","sourcesContent":["import { ADD_TO_CART,REMOVE_ITEM,SUB_QUANTITY,ADD_QUANTITY} from '../actions/action-types/cart-actions'\n\n// const shoppingInitialState = {\n//   // Colocar los productos del backend\n//   products: [],\n//   addedItems: [],\n//   total = 0\n// };\n\nexport default function CartReducer (state = products,action){\n   \n  //INSIDE HOME COMPONENT\n  if(action.type === ADD_TO_CART){\n        let addedItem = state.items.find(item=> item.id === action.id)\n        //check if the action id exists in the addedItems\n       let existed_item= state.addedItems.find(item=> action.id === item.id)\n       if(existed_item)\n       {\n          addedItem.quantity += 1 \n           return{\n              ...state,\n               total: state.total + addedItem.price \n                }\n      }\n       else{\n          addedItem.quantity = 1;\n          //calculating the total\n          let newTotal = state.total + addedItem.price \n          \n          return{\n              ...state,\n              addedItems: [...state.addedItems, addedItem],\n              total : newTotal\n          }\n          \n      }\n  }\n  if(action.type === REMOVE_ITEM){\n      let itemToRemove= state.addedItems.find(item=> action.id === item.id)\n      let new_items = state.addedItems.filter(item=> action.id !== item.id)\n      \n      //calculating the total\n      let newTotal = state.total - (itemToRemove.price * itemToRemove.quantity )\n      console.log(itemToRemove)\n      return{\n          ...state,\n          addedItems: new_items,\n          total: newTotal\n      }\n  }\n  //INSIDE CART COMPONENT\n  if(action.type=== ADD_QUANTITY){\n      let addedItem = state.items.find(item=> item.id === action.id)\n        addedItem.quantity += 1 \n        let newTotal = state.total + addedItem.price\n        return{\n            ...state,\n            total: newTotal\n        }\n  }\n  if(action.type=== SUB_QUANTITY){  \n      let addedItem = state.items.find(item=> item.id === action.id) \n      //if the qt == 0 then it should be removed\n      if(addedItem.quantity === 1){\n          let new_items = state.addedItems.filter(item=>item.id !== action.id)\n          let newTotal = state.total - addedItem.price\n          return{\n              ...state,\n              addedItems: new_items,\n              total: newTotal\n          }\n      }\n      else {\n          addedItem.quantity -= 1\n          let newTotal = state.total - addedItem.price\n          return{\n              ...state,\n              total: newTotal\n          }\n      }\n      \n  }\n\nelse{\n  return state\n  }\n  \n}"]},"metadata":{},"sourceType":"module"}