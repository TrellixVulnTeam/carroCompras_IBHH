{"ast":null,"code":"import { ADD_TO_CART, REMOVE_ITEM, SUB_QUANTITY, ADD_QUANTITY } from '../actions/action-types/cart-actions';\nexport default function Inicializer(props) {\n  // Colocar los productos del backend\n  products: [];\n\n  addedItems: [props.items];\n\n  total = 0;\n}\n_c = Inicializer;\n;\n\nconst CartReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : products;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  //INSIDE HOME COMPONENT\n  if (action.type === ADD_TO_CART) {\n    let addedItem = state.items.find(item => item.id === action.id); //check if the action id exists in the addedItems\n\n    let existed_item = state.addedItems.find(item => action.id === item.id);\n\n    if (existed_item) {\n      addedItem.quantity += 1;\n      return { ...state,\n        total: state.total + addedItem.price\n      };\n    } else {\n      addedItem.quantity = 1; //calculating the total\n\n      let newTotal = state.total + addedItem.price;\n      return { ...state,\n        addedItems: [...state.addedItems, addedItem],\n        total: newTotal\n      };\n    }\n  }\n\n  if (action.type === REMOVE_ITEM) {\n    let itemToRemove = state.addedItems.find(item => action.id === item.id);\n    let new_items = state.addedItems.filter(item => action.id !== item.id); //calculating the total\n\n    let newTotal = state.total - itemToRemove.price * itemToRemove.quantity;\n    console.log(itemToRemove);\n    return { ...state,\n      addedItems: new_items,\n      total: newTotal\n    };\n  } //INSIDE CART COMPONENT\n\n\n  if (action.type === ADD_QUANTITY) {\n    let addedItem = state.items.find(item => item.id === action.id);\n    addedItem.quantity += 1;\n    let newTotal = state.total + addedItem.price;\n    return { ...state,\n      total: newTotal\n    };\n  }\n\n  if (action.type === SUB_QUANTITY) {\n    let addedItem = state.items.find(item => item.id === action.id); //if the qt == 0 then it should be removed\n\n    if (addedItem.quantity === 1) {\n      let new_items = state.addedItems.filter(item => item.id !== action.id);\n      let newTotal = state.total - addedItem.price;\n      return { ...state,\n        addedItems: new_items,\n        total: newTotal\n      };\n    } else {\n      addedItem.quantity -= 1;\n      let newTotal = state.total - addedItem.price;\n      return { ...state,\n        total: newTotal\n      };\n    }\n  } else {\n    return state;\n  }\n};\n\n_c2 = CartReducer;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Inicializer\");\n$RefreshReg$(_c2, \"CartReducer\");","map":{"version":3,"sources":["/home/jhernandez/Documentos/Universidad/programacion-II/nuevocarro/carroCompras/front/carro-compras/src/reducers/cartReducer.js"],"names":["ADD_TO_CART","REMOVE_ITEM","SUB_QUANTITY","ADD_QUANTITY","Inicializer","props","products","addedItems","items","total","CartReducer","state","action","type","addedItem","find","item","id","existed_item","quantity","price","newTotal","itemToRemove","new_items","filter","console","log"],"mappings":"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","sourcesContent":["import { ADD_TO_CART,REMOVE_ITEM,SUB_QUANTITY,ADD_QUANTITY} from '../actions/action-types/cart-actions'\n\nexport default function Inicializer(props){\n  // Colocar los productos del backend\n  products: []\n  addedItems: [props.items]\n  total = 0\n};\n\nconst CartReducer = (state = products,action)=>{\n   \n  //INSIDE HOME COMPONENT\n  if(action.type === ADD_TO_CART){\n        let addedItem = state.items.find(item=> item.id === action.id)\n        //check if the action id exists in the addedItems\n       let existed_item= state.addedItems.find(item=> action.id === item.id)\n       if(existed_item)\n       {\n          addedItem.quantity += 1 \n           return{\n              ...state,\n               total: state.total + addedItem.price \n                }\n      }\n       else{\n          addedItem.quantity = 1;\n          //calculating the total\n          let newTotal = state.total + addedItem.price \n          \n          return{\n              ...state,\n              addedItems: [...state.addedItems, addedItem],\n              total : newTotal\n          }\n          \n      }\n  }\n  if(action.type === REMOVE_ITEM){\n      let itemToRemove= state.addedItems.find(item=> action.id === item.id)\n      let new_items = state.addedItems.filter(item=> action.id !== item.id)\n      \n      //calculating the total\n      let newTotal = state.total - (itemToRemove.price * itemToRemove.quantity )\n      console.log(itemToRemove)\n      return{\n          ...state,\n          addedItems: new_items,\n          total: newTotal\n      }\n  }\n  //INSIDE CART COMPONENT\n  if(action.type=== ADD_QUANTITY){\n      let addedItem = state.items.find(item=> item.id === action.id)\n        addedItem.quantity += 1 \n        let newTotal = state.total + addedItem.price\n        return{\n            ...state,\n            total: newTotal\n        }\n  }\n  if(action.type=== SUB_QUANTITY){  \n      let addedItem = state.items.find(item=> item.id === action.id) \n      //if the qt == 0 then it should be removed\n      if(addedItem.quantity === 1){\n          let new_items = state.addedItems.filter(item=>item.id !== action.id)\n          let newTotal = state.total - addedItem.price\n          return{\n              ...state,\n              addedItems: new_items,\n              total: newTotal\n          }\n      }\n      else {\n          addedItem.quantity -= 1\n          let newTotal = state.total - addedItem.price\n          return{\n              ...state,\n              total: newTotal\n          }\n      }\n      \n  }\n\nelse{\n  return state\n  }\n  \n}"]},"metadata":{},"sourceType":"module"}